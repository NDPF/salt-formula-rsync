{% from "rsync/map.jinja" import server with context %}

uid = {{ server.user }}
gid = {{ server.group }}
log file = /var/log/rsyncd.log
pid file = /var/run/rsyncd.pid
address = {{ server.bind.address }}

{%- for name, module in server.modules.iteritems() %}
[{{ name}}]
max connections = {{ module.max_connections }}
path = {{ module.path }}
read only = {{ module.read_only }}
lock file = /var/lock/rsync_{{ name }}.lock
{%- endfor %}
